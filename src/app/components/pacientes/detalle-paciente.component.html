<!-- detalle-paciente.component.html -->
<div class="dashboard-container">
    <!-- Header -->
    <header class="header">
      <div class="logo-section">
        <h1>Sistema de Alertas Médicas</h1>
      </div>
      <div class="user-section">
        <span class="user-name">Sr(a):{{obtenerUsuario()}}</span>
        <button class="logout-button" (click)="cerrarSesion()">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
        </button>
      </div>
    </header>
   
    <div class="main-content">
      <div class="content-header">
        <button class="back-button" (click)="volverALista()">
          <i class="fas fa-arrow-left"></i> Volver
        </button>
        <h2 class="section-title">Ficha Médica del Paciente</h2>
      </div>
   
      <div *ngIf="loading" class="loading">
        Cargando información del paciente...
      </div>
   
      <div *ngIf="error" class="error-message">
        {{error}}
      </div>
   
      <div class="patient-details" *ngIf="paciente && !loading">
        <div class="info-section">
          <div class="section-header">
            <h3>Información Personal</h3>
          </div>
          <div class="info-grid">
            <div class="info-item">
              <label>Nombre Completo</label>
              <span>{{paciente.nombre}} {{paciente.apellido}}</span>
            </div>
            <div class="info-item">
              <label>RUT</label>
              <span>{{paciente.rut}}</span>
            </div>
            <div class="info-item">
              <label>Edad</label>
              <span>{{paciente.edad}} años</span>
            </div>
            <div class="info-item">
              <label>Grupo Sanguíneo</label>
              <span>{{paciente.grupoSanguineo}}</span>
            </div>
            <div class="info-item">
              <label>Habitación</label>
              <span>{{paciente.numeroHabitacion}}</span>
            </div>
            <div class="info-item">
              <label>Estado</label>
              <span class="status-badge {{paciente.estado.toLowerCase()}}">
                {{paciente.estado}}
              </span>
            </div>
          </div>
        </div>
   
        <div class="info-section">
          <div class="section-header">
            <h3>Contacto</h3>
          </div>
          <div class="info-grid">
            <div class="info-item">
              <label>Teléfono</label>
              <span>{{paciente.telefono || 'No registrado'}}</span>
            </div>
            <div class="info-item">
              <label>Email</label>
              <span>{{paciente.email || 'No registrado'}}</span>
            </div>
            <div class="info-item">
              <label>Dirección</label>
              <span>{{paciente.direccion || 'No registrada'}}</span>
            </div>
          </div>
        </div>
   
        <div class="info-section">
          <div class="section-header">
            <h3>Información Médica</h3>
          </div>
          <div class="medical-grid">
            <div class="medical-item">
              <label>Alergias</label>
              <p class="medical-text">{{paciente.alergias || 'Sin alergias registradas'}}</p>
            </div>
            <div class="medical-item">
              <label>Antecedentes Médicos</label>
              <p class="medical-text">{{paciente.antecedentes || 'Sin antecedentes registrados'}}</p>
            </div>
          </div>
        </div>
   
        <div class="info-section">
          <div class="section-header">
            <h3>Signos Vitales Actuales</h3>
            <span class="timestamp" *ngIf="paciente.signosVitales && paciente.signosVitales.length > 0">
              Última actualización: {{paciente.signosVitales[0]?.fechaRegistro | date:'medium'}}
            </span>
          </div>
          <div class="vitals-grid" *ngIf="paciente.signosVitales && paciente.signosVitales.length > 0">
            <div class="vital-card">
              <i class="fas fa-heartbeat"></i>
              <div class="vital-info">
                <label>Presión Arterial</label>
                <span class="vital-value">{{paciente.signosVitales[0]?.presionArterial}} mmHg</span>
              </div>
            </div>
            <div class="vital-card">
              <i class="fas fa-clock"></i>
              <div class="vital-info">
                <label>Frecuencia Cardíaca</label>
                <span class="vital-value">{{paciente.signosVitales[0]?.frecuenciaCardiaca}} bpm</span>
              </div>
            </div>
            <div class="vital-card">
              <i class="fas fa-thermometer-half"></i>
              <div class="vital-info">
                <label>Temperatura</label>
                <span class="vital-value">{{paciente.signosVitales[0]?.temperatura}}°C</span>
              </div>
            </div>
            <div class="vital-card">
              <i class="fas fa-lungs"></i>
              <div class="vital-info">
                <label>Saturación O₂</label>
                <span class="vital-value">{{paciente.signosVitales[0]?.saturacionOxigeno}}%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
   </div>